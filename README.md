# Калькулятор доходов байеров

Streamlit-приложение для объединения CSV-файлов сверок по байерам и построения сводных таблиц.

## Возможности

- загрузка нескольких CSV-файлов прямо в интерфейсе;
- очистка данных (игнорируются строки `Всего` / `Итого`, нормализуются числа);
- детальная таблица с разбивкой по типам комиссий;
- сводная таблица по байерам и партнерским программам;
- финальная сводка по байерам с учетoм всех программ;
- выгрузка полученных сводных таблиц в CSV.
- ручной ввод курсов валют → USD для конвертации выручки.

## Запуск

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
streamlit run app.py
```

После запуска откройте ссылку из терминала (обычно `http://localhost:8501`), загрузите CSV-файлы сверок и используйте фильтры для анализа. В боковой панели отредактируйте курсы валют → USD (по умолчанию 1.0), чтобы пересчитать столбец «Ревеню в $$» и суммы чарджбеков.

## Структура проекта

```
├── app.py                   # Streamlit-приложение
├── requirements.txt         # Зависимости проекта
├── src
│   └── zp_calculator
│       ├── __init__.py
│       └── data_processing.py
└── tests
    └── test_data_processing.py
```

## Тестирование

```bash
pytest
```

Тесты проверяют очистку данных и корректность агрегирования.

## Ограничения и дальнейшее развитие

- Суммы агрегируются по валюте, указанной в файле. Если валюта отсутствует или файлы содержат разные валюты, итоговая таблица покажет их по отдельности.
- При необходимости можно добавить загрузку заранее настроенных справочников (например, для нормализации имен байеров).
- Курсы задаются вручную на текущий сеанс. При смене файла/обновлении страницы значения нужно вводить снова (по умолчанию 1.0).
